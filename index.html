<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cemiteryal Death Carneficine ‚Ä¢ Site Oficial</title>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
/* *****************************************************************
 * 1. VARI√ÅVEIS DE TEMA (APLICADAS AO HTML PARA ACESSO GLOBAL)
 * O tema padr√£o √© DARK.
 ***************************************************************** */
:root, [data-theme="dark"] {
    --theme-background: #1a1a1a;
    --theme-primary: #fff;
    --theme-highlight: #00ffd5; /* Ciano/Verde */
    --theme-secondary: #00bfff;
    --theme-glass-bg: rgba(255,255,255,0.08);
    --theme-glass-border: rgba(255,255,255,0.18);
    --theme-glass-shadow: rgba(0,255,180,0.18);
    --theme-whatsapp-color: #25d366;
}
[data-theme="red"] {
    --theme-background: #000000;
    --theme-primary: #fff;
    --theme-highlight: #ff4d4d; /* Vermelho Vivo */
    --theme-secondary: #cc0000;
    --theme-glass-bg: rgba(255,77,77,0.08);
    --theme-glass-border: rgba(255,77,77,0.18);
    --theme-glass-shadow: rgba(255,77,77,0.35);
    --theme-whatsapp-color: #f00; /* Simula cor do WhatsApp */
}
[data-theme="light"] {
    --theme-background: #ffffff;
    --theme-primary: #000;
    --theme-highlight: #3333ff; /* Azul Escuro */
    --theme-secondary: #6666ff;
    --theme-glass-bg: rgba(0,0,0,0.08);
    --theme-glass-border: rgba(0,0,0,0.18);
    --theme-glass-shadow: rgba(51,51,255,0.18);
    --theme-whatsapp-color: #3333ff;
}

/* *****************************************************************
 * 2. ESTILOS GLOBAIS COM VARI√ÅVEIS
 ***************************************************************** */
* { box-sizing: border-box; font-family: 'Segoe UI', Arial, sans-serif; }

body {
  margin: 0;
  min-height: 100vh;
  /* Aplica o fundo e cor prim√°ria das vari√°veis */
  background: var(--theme-background); 
  color: var(--theme-primary);
  overflow-x: hidden;
  cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" style="font-size: 20px;"><text y="20">üïØÔ∏è</text></svg>') 12 12, auto;
}

/* FUNDO ANIMADO */
body::before {
  content: "";
  position: fixed;
  inset: 0;
  background:
    /* Gradientes usam vari√°veis */
    radial-gradient(circle at 20% 20%, var(--theme-highlight), transparent 40%),
    radial-gradient(circle at 80% 60%, var(--theme-secondary), transparent 40%);
  animation: bgmove 12s infinite alternate;
  opacity: var(--theme-glass-shadow); /* Opacidade controlada pela sombra */
  z-index: -1;
}

/* MENU */
nav {
  /* ... (Mantido, mas ajustado para cores din√¢micas) ... */
  color: var(--theme-primary);
}

nav a {
  color: var(--theme-primary);
}

nav a:hover { color: var(--theme-whatsapp-color); }

/* TITULO */
h1 {
  text-align: center;
  letter-spacing: 1px;
  /* Sombra usa cor de destaque */
  text-shadow: 0 0 15px var(--theme-highlight); 
}

/* CARDS (EFEITO VIDRO) */
.card, .support, .secret, .modal-content {
  background: var(--theme-glass-bg);
  backdrop-filter: blur(16px);
  border-radius: 20px;
  border: 1px solid var(--theme-glass-border);
  /* Sombra usa cor de destaque */
  box-shadow: 0 0 25px var(--theme-glass-shadow), inset 0 0 15px rgba(255,255,255,0.06); 
  transition: 0.35s;
}

.btn {
  /* ... (Mantido) ... */
  background: linear-gradient(45deg, var(--theme-highlight), var(--theme-secondary));
  color: var(--theme-background); /* Cor do texto no bot√£o √© a cor do fundo */
  box-shadow: 0 0 25px var(--theme-highlight);
}

/* SELE√á√ÉO DE TEMAS */
.theme-selector-container {
    display: flex;
    gap: 15px;
    justify-content: center;
    margin-top: 15px;
    margin-bottom: 25px;
}
.theme-option {
    width: 30px;
    height: 30px;
    border-radius: 50%;
    cursor: pointer;
    border: 2px solid var(--theme-glass-border);
    transition: transform 0.2s, box-shadow 0.2s;
}
.theme-option.active {
    border: 4px solid var(--theme-highlight);
    transform: scale(1.1);
    box-shadow: 0 0 10px var(--theme-highlight);
}

/* Defini√ß√µes de cores fixas para os c√≠rculos */
#theme-dark { background-color: #1a1a1a; }
#theme-red { background-color: #ff4d4d; }
#theme-light { background-color: #ffffff; border: 2px solid #ccc; }

</style>
</head>

<body data-theme="dark"> <nav>
  <div>üïØÔ∏è <strong>Cemiteryal</strong></div>
  <div>
    <a href="#inicio">In√≠cio</a>
    <a href="#admins">ADMs</a>
    <a href="#customization">Personalizar</a>
    <a href="#secreto">√Årea Secreta</a>
  </div>
</nav>

<audio id="clickSound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_5c91c8b7b1.mp3"></audio>
<audio id="backgroundMusic" loop src="https://raw.githubusercontent.com/zalyeee/cemiteryal.github.io/main/audio/penumbra_musica.mp3"></audio>

<div class="container" id="inicio">
<h1>Cemiteryal Death Carneficine</h1>

<section id="admins" class="cards">
  <div class="card"><img src="https://via.placeholder.com/150"><h3>ADM 1</h3><div class="unavailable">Link indispon√≠vel</div></div>
  <div class="card"><img src="https://via.placeholder.com/150"><h3>ADM 2</h3><div class="unavailable">Link indispon√≠vel</div></div>
  <div class="card"><img src="https://via.placeholder.com/150"><h3>ADM 3</h3><div class="unavailable">Link indispon√≠vel</div></div>
  <div class="card"><img src="https://via.placeholder.com/150"><h3>ADM 4</h3><div class="unavailable">Link indispon√≠vel</div></div>
</section>

<div class="support">
  <p><strong>Suporte ou parceria</strong></p>
  
  <a class="btn" 
     href="#" 
     onclick="handleWhatsClick(event)"
     id="whatsButton">Entre em contato</a>
  <br>
  
  <a class="btn" href="#">üì¢ Canal do WhatsApp</a>
</div>

<section id="customization" class="secret">
  <h3>üé® Personaliza√ß√£o (Temas, Cursor & Cliques)</h3>

  <h4>Esquema de Cores</h4>
  <div class="theme-selector-container">
    <div id="theme-dark" class="theme-option" onclick="setTheme('dark')"></div>
    <div id="theme-red" class="theme-option" onclick="setTheme('red')"></div>
    <div id="theme-light" class="theme-option" onclick="setTheme('light')"></div>
  </div>

  <h4>M√©tricas do Site</h4>
  <p>Acessos Totais: <strong id="totalAccesses">0</strong></p>
  <p style="font-size: 0.85rem; opacity: 0.6;">(Este contador √© atualizado a cada visita)</p>
  
  <hr style="margin: 30px 0; border-color: var(--theme-glass-border);">
  <h4>Cursor & Emojis</h4>
  <p style="font-size: 0.9rem; opacity: 0.7;">
    Selecione um emoji para usar no seu cursor e na anima√ß√£o de clique.
  </p>
  <div id="admList" style="text-align: left; margin: 20px auto; max-width: 500px;">
    </div>
  <p>Emoji Atual: <span id="currentEmojiDisplay" style="font-size: 1.5rem;">üïØÔ∏è</span></p>
</section>

<section id="secreto" class="secret">
  <h3>üîí √Årea Secreta</h3>
  <button class="btn" onclick="openLoginModal()">Login de ADM</button>
</section>

<footer>
¬© 2026 ‚Ä¢ Cemiteryal Death Carneficine
</footer>
</div>

<div id="toastNotification"></div>

<div id="modalLogin" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeModal('modalLogin')">&times;</span>
    <h3>üîë Login de ADM</h3>
    <input type="text" id="loginUser" placeholder="Usu√°rio/Senha Padr√£o" style="width: 100%;" required>
    <input type="password" id="loginPass" placeholder="Senha Secreta" style="width: 100%;" required>
    <button class="btn" onclick="unlock()">Entrar</button>
  </div>
</div>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-app.js";
  import { getFirestore, collection, addDoc, query, orderBy, onSnapshot, serverTimestamp, doc, getDoc, setDoc, increment } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyAsHXQr5k3HviBVEFPz918g_zcjUZdFpJY",
    authDomain: "cemiteryal-site.firebaseapp.com",
    projectId: "cemiteryal-site",
    storageBucket: "cemiteryal-site.firebasestorage.app",
    messagingSenderId: "935123054222",
    appId: "1:935123054222:web:f720f6ae514631dd94a3df"
  };

  const app = initializeApp(firebaseConfig);
  window.db = getFirestore(app);
  window.collection = collection;
  window.addDoc = addDoc;
  window.query = query;
  window.orderBy = orderBy;
  window.onSnapshot = onSnapshot;
  window.serverTimestamp = serverTimestamp;
  
  // Expondo fun√ß√µes do Firestore para uso no JS
  window.firestore_doc = doc;
  window.firestore_getDoc = getDoc;
  window.firestore_setDoc = setDoc;
  window.firestore_increment = increment;

</script>

<script>
// Vari√°veis Globais
let clicks = 0;
// Carrega o tema e o emoji salvos no localStorage
let currentTheme = localStorage.getItem('cemiteryal_theme') || "dark";
let currentEmoji = localStorage.getItem('cemiteryal_emoji') || "üïØÔ∏è"; 
let userName = localStorage.getItem('cemiteryal_username'); 

const clickSound = document.getElementById("clickSound");
const backgroundMusic = document.getElementById("backgroundMusic");
let hasStartedMusic = false;
let toastTimeout;

const admData = [
    { name: "Isaac (ADM 1)", emojis: ["üíÄ", "üî•", "üòà"] },
    { name: "Fernanda (ADM 2)", emojis: ["üî™", "üåπ", "‚õìÔ∏è"] },
    { name: "Rafael (ADM 3)", emojis: ["üåë", "‚ö°", "üï∏Ô∏è"] },
    { name: "Mariana (ADM 4)", emojis: ["ü©∏", "ü¶Ñ", "üíî"] },
    { name: "Voc√™ (Visitante)", emojis: ["üëΩ", "‚ú®", "üí°"] },
];

// ----------------------------------------------------
// 0. FUN√á√ÉO DE TEMA (NOVA E MELHORADA)
// ----------------------------------------------------
function setTheme(themeName) {
    document.body.setAttribute('data-theme', themeName);
    localStorage.setItem('cemiteryal_theme', themeName);
    
    // Atualiza o estado visual dos bot√µes
    document.querySelectorAll('.theme-option').forEach(btn => {
        btn.classList.remove('active');
    });
    document.getElementById(`theme-${themeName}`).classList.add('active');

    // Notifica√ß√£o
    let message = `Tema ${themeName.toUpperCase()} aplicado com sucesso.`;
    if (themeName === 'red') message = '‚ò†Ô∏è Tema Black & Red ativado!';
    showToast(message, 'success');
}


// ----------------------------------------------------
// 0. FUN√á√ïES DE INTERA√á√ÉO E NOTIFICA√á√ÉO (Ajustadas)
// ----------------------------------------------------

function showToast(message, type = 'info') {
    const toast = document.getElementById("toastNotification");
    clearTimeout(toastTimeout); 

    let icon = '';
    if (type === 'success') icon = '‚úÖ ';
    if (type === 'error') icon = '‚ùå ';
    if (type === 'warning') icon = '‚ö†Ô∏è ';
    if (type === 'whatsapp') icon = 'üì± ';

    toast.innerHTML = icon + message;
    toast.className = "show";

    toastTimeout = setTimeout(() => {
        toast.className = toast.className.replace("show", "");
    }, 3000);
}

function playClickSound() {
    if (clickSound) {
        clickSound.currentTime = 0;
        clickSound.play().catch(e => console.log("Erro ao tocar √°udio (Bloqueado):", e));
    }

    if (backgroundMusic && !hasStartedMusic) {
        backgroundMusic.volume = 0.4;
        backgroundMusic.play().catch(e => console.log("M√∫sica de fundo bloqueada."));
        hasStartedMusic = true;
    }
}

// ----------------------------------------------------
// 1. L√ìGICA DE PERSONALIZA√á√ÉO (Mantida)
// ----------------------------------------------------

function generateAdmSelectors() {
    const list = document.getElementById("admList");
    let html = '';
    
    admData.forEach(adm => {
        html += `
            <div class="adm-selector">
                <strong>${adm.name}</strong>: 
                <div>
        `;
        adm.emojis.forEach(emoji => {
            html += `<span class="emoji-option" onclick="selectEmoji('${emoji}')">${emoji}</span>`;
        });
        html += `
                </div>
                <button class="btn-select btn" onclick="selectEmoji('${adm.emojis[0]}')">Selecionar ${adm.emojis[0]}</button>
            </div>
        `;
    });
    list.innerHTML = html;
}

function selectEmoji(newEmoji) {
    currentEmoji = newEmoji;
    localStorage.setItem('cemiteryal_emoji', newEmoji); 
    
    document.getElementById("currentEmojiDisplay").innerText = newEmoji;
    
    const cursorUrl = `url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" style="font-size: 20px;"><text y="20">${newEmoji}</text></svg>') 12 12, auto`;
    document.body.style.cursor = cursorUrl;
    
    showToast(`Emoji ${newEmoji} selecionado com sucesso!`, 'success');
}


// ----------------------------------------------------
// 2. L√ìGICA DE M√âTICAS (Contador de Acessos)
// ----------------------------------------------------
const COUNTER_DOC_REF = {
    db: null, // Ser√° preenchido na inicializa√ß√£o
    collection: 'site_metrics',
    docId: 'access_count'
};

async function handleAccessCounter() {
    if (!window.db) return;
    COUNTER_DOC_REF.db = window.db;

    try {
        const docRef = window.firestore_doc(COUNTER_DOC_REF.db, COUNTER_DOC_REF.collection, COUNTER_DOC_REF.docId);
        
        // 1. Incrementa o contador na primeira visita da sess√£o
        if (!sessionStorage.getItem('visited')) {
            await window.firestore_setDoc(docRef, { count: window.firestore_increment(1) }, { merge: true });
            sessionStorage.setItem('visited', 'true'); // Marca a sess√£o
        }
        
        // 2. L√™ o valor atual para exibir
        const docSnap = await window.firestore_getDoc(docRef);
        if (docSnap.exists()) {
            const count = docSnap.data().count;
            document.getElementById('totalAccesses').innerText = count.toLocaleString('pt-BR');
        } else {
            document.getElementById('totalAccesses').innerText = '0 (Iniciando Contador)';
        }

    } catch(error) {
        console.error("Erro no contador de acessos:", error);
        document.getElementById('totalAccesses').innerText = 'Erro ao carregar';
    }
}

// ----------------------------------------------------
// 3. L√ìGICA DE INTERFACE E MODAIS
// ----------------------------------------------------

function openLoginModal() {
    document.getElementById("modalLogin").style.display = "block";
}

function closeModal(id) {
    document.getElementById(id).style.display = "none";
}

// Nenhuma fun√ß√£o 'logout' ou 'loadMessages' √© necess√°ria no index.html,
// pois o chat e o logout agora s√£o feitos no chat.html.

function unlock() {
    const pass = document.getElementById("loginPass").value;
    const user = document.getElementById("loginUser").value.trim();

    closeModal('modalLogin'); 

    if (pass === "isaacomebosta1010") {
        
        userName = user || "ADM Padr√£o";
        localStorage.setItem('cemiteryal_username', userName);

        let welcomeMessage = "Senha correta! Redirecionando para o Chat Secreto.";
        if (user.toLowerCase().includes("morien")) {
             welcomeMessage = "Bem-vind@ Morien. Redirecionando para o Chat Secreto.";
        } else if (user) {
             welcomeMessage = `Bem-vind@ ${user}! Redirecionando para o Chat Secreto.`;
        }
        
        showToast(welcomeMessage, 'success');
        playClickSound();
        
        // Redireciona para a nova p√°gina do chat (em nova aba)
        setTimeout(() => {
            window.open('./chat.html', '_blank');
        }, 300);

    } else {
        showToast("Senha ou usu√°rio incorretos. Tente novamente.", 'error');
    }
}

function handleWhatsClick(e) {
  e.preventDefault(); 
  
  showToast("Encaminhando para o WhatsApp. Aviso de Bot ativado.", 'whatsapp');
  
  playClickSound();

  setTimeout(() => {
    window.open("https://api.whatsapp.com/send?phone=5531999999999&text=Ol%C3%A1!%20Gostaria%20de%20falar%20sobre%20suporte%20ou%20parceria%20no%20Cemiteryal%20Death%20Carneficine.", '_blank');
  }, 300);
}


// Fun√ß√£o principal que rastreia cliques e cria o emoji explosivo
document.addEventListener("click", e => {
  clicks++;
  const c = document.getElementById("clicks");
  if (c) c.innerText = clicks;

  const span = document.createElement("span");
  span.innerText = currentEmoji;
  span.style.position = "fixed";
  span.style.left = e.clientX + "px";
  span.style.top = e.clientY + "px";
  span.style.pointerEvents = "none";
  span.style.animation = "explode 0.6s ease forwards";
  span.style.zIndex = 1000;
  document.body.appendChild(span);
  setTimeout(()=>span.remove(),600);
  
  const target = e.target.closest('.btn, .btn-select');
  if (target) {
      playClickSound();
  }
});

function initializeEmoji() {
    // Aplica o tema salvo
    setTheme(currentTheme); 
    
    // Aplica o emoji salvo
    const display = document.getElementById("currentEmojiDisplay");
    if (display) {
        display.innerText = currentEmoji;
    }

    const cursorUrl = `url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" style="font-size: 20px;"><text y="20">${currentEmoji}</text></svg>') 12 12, auto`;
    document.body.style.cursor = cursorUrl;
}

// Inicializa√ß√£o: Gera a lista de ADMs e aplica o emoji salvo
document.addEventListener('DOMContentLoaded', () => {
    generateAdmSelectors();
    initializeEmoji();
    handleAccessCounter(); // NOVO: Inicia o contador de acessos
    
    if (!userName) {
        // Nada para fazer, o usu√°rio n√£o precisa logar para navegar.
    }
});
</script>

</body>
</html>
