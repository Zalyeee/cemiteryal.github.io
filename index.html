<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cemiteryal Death Carneficine ‚Ä¢ Site Oficial</title>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
/* ... (Seu CSS permanece o mesmo) ... */
* { box-sizing: border-box; font-family: 'Segoe UI', Arial, sans-serif; }

body {
  margin: 0;
  min-height: 100vh;
  background: radial-gradient(circle at top, #1a1a1a, #000);
  color: #fff;
  overflow-x: hidden;
  /* Cursor Padr√£o do site */
  cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" style="font-size: 20px;"><text y="20">üïØÔ∏è</text></svg>') 12 12, auto;
}
/* ... (Restante do CSS) ... */
.btn {
  /* ... (Estilos do Bot√£o) ... */
  display: inline-block;
  margin-top: 18px;
  padding: 13px 30px;
  border-radius: 30px;
  background: linear-gradient(45deg,#00ffd5,#00bfff);
  color: #000;
  font-weight: bold;
  text-decoration: none;
  cursor: pointer;
  border: none;
  box-shadow: 0 0 25px rgba(0,255,200,0.45);
  transition: 0.3s;
}
/* ... (Restante do CSS) ... */
</style>
</head>

<body>

<nav>
  <div>üïØÔ∏è <strong>Cemiteryal</strong></div>
  <div>
    <a href="#inicio">In√≠cio</a>
    <a href="#admins">ADMs</a>
    <a href="#customization">Personalizar</a>
    <a href="#secreto">√Årea Secreta</a>
  </div>
</nav>

<audio id="clickSound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_5c91c8b7b1.mp3"></audio>

<audio id="backgroundMusic" loop src="SUA_URL_BRUTA_DO_MP3_AQUI"></audio>

<div class="container" id="inicio">
<h1>Cemiteryal Death Carneficine</h1>

<section id="admins" class="cards">
  <div class="card"><img src="https://via.placeholder.com/150"><h3>ADM 1</h3><div class="unavailable">Link indispon√≠vel</div></div>
  <div class="card"><img src="https://via.placeholder.com/150"><h3>ADM 2</h3><div class="unavailable">Link indispon√≠vel</div></div>
  <div class="card"><img src="https://via.placeholder.com/150"><h3>ADM 3</h3><div class="unavailable">Link indispon√≠vel</div></div>
  <div class="card"><img src="https://via.placeholder.com/150"><h3>ADM 4</h3><div class="unavailable">Link indispon√≠vel</div></div>
</section>

<div class="support">
  <p><strong>Suporte ou parceria</strong></p>
  
  <a class="btn" 
     href="https://api.whatsapp.com/send?phone=5531999999999&text=Ol%C3%A1!%20Gostaria%20de%20falar%20sobre%20suporte%20ou%20parceria%20no%20Cemiteryal%20Death%20Carneficine." 
     target="_blank" 
     id="whatsButton">Entre em contato</a>
  <br>
  
  <a class="btn" href="#">üì¢ Canal do WhatsApp</a>
</div>

<section id="customization" class="secret">
  <h3>üé® Personaliza√ß√£o (Cursor & Cliques)</h3>
  <p style="font-size: 0.9rem; opacity: 0.7;">
    Selecione um emoji para usar no seu cursor (apenas PC/Notebook) e na anima√ß√£o de clique.
  </p>
  <div id="admList" style="text-align: left; margin: 20px auto; max-width: 500px;">
    </div>
  <p>Emoji Atual: <span id="currentEmojiDisplay" style="font-size: 1.5rem;">üïØÔ∏è</span></p>
</section>

<section id="secreto" class="secret">
  <h3>üîí √Årea Secreta</h3>
  <input type="password" id="pass" placeholder="Senha">
  <br>
  <button class="btn" onclick="unlock()">Entrar</button>

  <div id="secretContent">
    <p>üìä Cliques nesta sess√£o: <span id="clicks">0</span></p>
    
    <h4 style="margin-top: 30px;">üí¨ Chat Secreto</h4>
    <div id="chatWindow">
      <p style="color: yellow;">Aguardando conex√£o com o Firebase...</p>
    </div>
    <input type="text" id="chatInput" placeholder="Digite sua mensagem..." style="width: 70%; margin-right: 5px;">
    <button class="btn" onclick="sendMessage()" style="padding: 10px 20px; margin-top: 0;">Enviar</button>
  </div>
</section>

<footer>
¬© 2026 ‚Ä¢ Cemiteryal Death Carneficine
</footer>
</div>

<script type="module">
  // Importar o App principal e o Firestore para o chat
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-app.js";
  import { getFirestore, collection, addDoc, query, orderBy, onSnapshot, serverTimestamp } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-firestore.js";

  // Sua configura√ß√£o web do Firebase
  const firebaseConfig = {
    apiKey: "AIzaSyAsHXQr5k3HviBVEFPz918g_zcjUZdFpJY",
    authDomain: "cemiteryal-site.firebaseapp.com",
    projectId: "cemiteryal-site",
    storageBucket: "cemiteryal-site.firebasestorage.app",
    messagingSenderId: "935123054222",
    appId: "1:935123054222:web:f720f6ae514631dd94a3df"
  };

  // Inicializar o Firebase e o Firestore
  const app = initializeApp(firebaseConfig);
  window.db = getFirestore(app);
  window.collection = collection;
  window.addDoc = addDoc;
  window.query = query;
  window.orderBy = orderBy;
  window.onSnapshot = onSnapshot;
  window.serverTimestamp = serverTimestamp;

  console.log("Firebase inicializado. Firestore pronto para o chat.");
</script>

<script>
// Vari√°veis Globais
let clicks = 0;
let currentEmoji = "üïØÔ∏è";
let userName = null;

const clickSound = document.getElementById("clickSound");
const backgroundMusic = document.getElementById("backgroundMusic"); // NOVO: Elemento da m√∫sica de fundo
let hasStartedMusic = false; // NOVO: Flag para iniciar a m√∫sica s√≥ no primeiro clique

// Dados dos ADMs para a Personaliza√ß√£o
const admData = [
    { name: "Isaac (ADM 1)", emojis: ["üíÄ", "üî•", "üòà"] },
    { name: "Fernanda (ADM 2)", emojis: ["üî™", "üåπ", "‚õìÔ∏è"] },
    { name: "Rafael (ADM 3)", emojis: ["üåë", "‚ö°", "üï∏Ô∏è"] },
    { name: "Mariana (ADM 4)", emojis: ["ü©∏", "ü¶Ñ", "üíî"] },
    { name: "Voc√™ (Visitante)", emojis: ["üëΩ", "‚ú®", "üí°"] },
];

// ----------------------------------------------------
// 0. FUN√á√ÉO DE SOM REUTILIZ√ÅVEL
// ----------------------------------------------------
function playClickSound() {
    // 1. Toca o som de clique
    if (clickSound) {
        clickSound.currentTime = 0;
        clickSound.play().catch(e => console.log("Erro ao tocar √°udio (Bloqueado):", e));
    }

    // 2. Toca a m√∫sica de fundo NA PRIMEIRA INTERA√á√ÉO
    if (backgroundMusic && !hasStartedMusic) {
        backgroundMusic.volume = 0.4; // Volume baixo para n√£o atrapalhar
        backgroundMusic.play().catch(e => console.log("Erro ao iniciar a m√∫sica:", e));
        hasStartedMusic = true;
    }
}

// ----------------------------------------------------
// 1. L√ìGICA DE PERSONALIZA√á√ÉO
// ----------------------------------------------------

// Fun√ß√£o para gerar os seletores de emoji
function generateAdmSelectors() {
    const list = document.getElementById("admList");
    let html = '';
    
    admData.forEach(adm => {
        html += `
            <div class="adm-selector">
                <strong>${adm.name}</strong>: 
                <div>
        `;
        adm.emojis.forEach(emoji => {
            html += `<span class="emoji-option" onclick="selectEmoji('${emoji}')">${emoji}</span>`;
        });
        html += `
                </div>
                <button class="btn-select btn" onclick="selectEmoji('${adm.emojis[0]}')">Selecionar ${adm.emojis[0]}</button>
            </div>
        `;
    });
    list.innerHTML = html;
}

// Fun√ß√£o que atualiza o cursor e o emoji de clique
function selectEmoji(newEmoji) {
    currentEmoji = newEmoji;
    
    document.getElementById("currentEmojiDisplay").innerText = newEmoji;
    
    // Atualiza o Cursor CSS
    const cursorUrl = `url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" style="font-size: 20px;"><text y="20">${newEmoji}</text></svg>') 12 12, auto`;
    document.body.style.cursor = cursorUrl;
    
    alert(`Emoji ${newEmoji} selecionado para cursor e cliques!`);
}

// ----------------------------------------------------
// 2. L√ìGICA DE CHAT (INTEGRA√á√ÉO COM FIREBASE)
// ----------------------------------------------------

// Fun√ß√£o para enviar uma mensagem
async function sendMessage() {
    const chatInput = document.getElementById("chatInput");
    const message = chatInput.value.trim();
    
    if (!message || !userName || !window.db) return;

    try {
        await window.addDoc(window.collection(window.db, "chat_cemiteryal"), {
            user: userName,
            text: message,
            emoji: currentEmoji,
            timestamp: window.serverTimestamp()
        });

        chatInput.value = '';
        chatInput.focus();
    } catch (e) {
        console.error("Erro ao adicionar documento: ", e);
        alert("Erro ao enviar mensagem. Verifique a configura√ß√£o do seu Firestore.");
    }
}

// Fun√ß√£o para carregar as mensagens em tempo real
function loadMessages() {
    const chatWindow = document.getElementById("chatWindow");
    
    const q = window.query(window.collection(window.db, "chat_cemiteryal"), window.orderBy("timestamp", "asc"));

    window.onSnapshot(q, (snapshot) => {
        let messagesHtml = '';
        snapshot.docChanges().forEach((change) => {
            if (change.type === "added") {
                const msg = change.doc.data();
                const formattedTime = msg.timestamp ? new Date(msg.timestamp.seconds * 1000).toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit' }) : '...';
                
                messagesHtml += `
                    <div class="chat-message">
                        ${msg.emoji} <strong>${msg.user}</strong> <span style="font-size: 0.7em; opacity: 0.6;">(${formattedTime})</span>: ${msg.text}
                    </div>
                `;
            }
        });
        chatWindow.innerHTML += messagesHtml;
        chatWindow.scrollTop = chatWindow.scrollHeight;
    });
}

// ----------------------------------------------------
// 3. L√ìGICA DE INTERFACE
// ----------------------------------------------------

// L√≥gica de desbloqueio da √Årea Secreta
function unlock() {
  const pass = document.getElementById("pass").value;
  // A SENHA SECRETA
  if (pass === "isaacomebosta1010") {
    document.getElementById("secretContent").style.display = "block";
    
    if (!userName) {
        const tempName = prompt("Bem-vindo(a)! Digite seu nome de usu√°rio para o chat (m√°x. 15 caracteres):");
        userName = tempName ? tempName.substring(0, 15) : "Visitante An√¥nimo";
    }

    if (window.db) {
        loadMessages();
    } else {
        alert("√Årea Secreta Desbloqueada! Aguarde a conex√£o com o Firebase para o chat.");
    }

  } else alert("Senha incorreta");
}

// Fun√ß√£o placeholder para o WhatsApp (o som √© tocado pelo listener global)
function handleWhatsClick() {
  console.log("Abrindo link do WhatsApp...");
}

// Fun√ß√£o principal que rastreia cliques e cria o emoji explosivo
document.addEventListener("click", e => {
  // 1. L√ìGICA DO CLIQUE EMOJI/CONTADOR (em qualquer lugar)
  clicks++;
  const c = document.getElementById("clicks");
  if (c) c.innerText = clicks;

  const span = document.createElement("span");
  span.innerText = currentEmoji;
  span.style.position = "fixed";
  span.style.left = e.clientX + "px";
  span.style.top = e.clientY + "px";
  span.style.pointerEvents = "none";
  span.style.animation = "explode 0.6s ease forwards";
  span.style.zIndex = 1000;
  document.body.appendChild(span);
  setTimeout(()=>span.remove(),600);
  
  // 2. L√ìGICA DE SOM (apenas em bot√µes)
  const target = e.target.closest('.btn, .btn-select');
  if (target) {
      playClickSound();
  }
});

// Inicializa√ß√£o: Gera a lista de ADMs ao carregar a p√°gina
document.addEventListener('DOMContentLoaded', generateAdmSelectors);

</script>

</body>
  </html>
